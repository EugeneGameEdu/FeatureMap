@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 220 16% 22%;
    --foreground: 218 27% 94%;
    --card: 220 17% 28%;
    --card-foreground: 218 27% 94%;
    --popover: 220 17% 28%;
    --popover-foreground: 218 27% 94%;
    --primary: 14 51% 63%;
    --primary-foreground: 218 27% 94%;
    --secondary: 220 16% 32%;
    --secondary-foreground: 218 27% 94%;
    --muted: 220 16% 32%;
    --muted-foreground: 220 13% 60%;
    --accent: 14 51% 63%;
    --accent-subheader: 26 49% 61%;
    --accent-foreground: 218 27% 94%;
    --destructive: 354 42% 56%;
    --destructive-foreground: 218 27% 94%;
    --border: 220 16% 36%;
    --input: 220 16% 36%;
    --ring: 14 51% 63%;
    --edge-dependency: theme('colors.edge.dependency');
    --edge-dependent: theme('colors.edge.dependent');
    --chart-1: 14 51% 63%;
    --chart-2: 92 28% 65%;
    --chart-3: 40 71% 73%;
    --chart-4: 220 16% 36%;
    --chart-5: 354 42% 56%;
    --radius: 0.5rem;

    --bg: #2e3440;
    --bg-secondary: #3b4252;
    --bg-tertiary: #434c5e;
    --bg-hover: #4c566a;
    --border-light: #5c6678;
    --text: #eceff4;
    --text-secondary: #d8dee9;
    --text-muted: #7b88a1;
    --accent-hex: #d08770;
    --accent-hover: #e09980;
    --accent-muted: rgba(208, 135, 112, 0.2);
    --success: #a3be8c;
    --warning: #ebcb8b;
    --danger: #bf616a;
  }

  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium;
    @apply transition-colors duration-150;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-muted)];
    @apply disabled:pointer-events-none disabled:opacity-50;
  }

  .btn-primary {
    @apply bg-[var(--accent-hex)] text-white hover:bg-[var(--accent-hover)];
  }

  .btn-danger {
    @apply bg-[var(--danger)] text-white hover:opacity-90;
  }

  .tab {
    @apply px-4 py-2 text-sm font-medium transition-colors duration-150;
    @apply text-[var(--text-secondary)] hover:text-[var(--text)];
    @apply border-b-2 border-transparent;
  }

  .tab.active {
    @apply text-[var(--text)] border-[var(--accent-hex)];
  }

  .section-header {
    @apply flex items-center gap-2 px-4 py-2 text-sm font-semibold;
    @apply bg-[var(--bg-tertiary)] text-[var(--text)];
    @apply border-b border-[var(--border-light)];
  }

  .section-content {
    @apply p-4;
  }

  .badge {
    @apply inline-flex items-center rounded px-2 py-0.5 text-xs font-medium;
  }

  .badge-media {
    @apply bg-cyan-100 text-cyan-700;
  }

  .badge-flag {
    @apply bg-yellow-100 text-yellow-700;
  }

}

.react-flow__edge.comment-link.selected .react-flow__edge-path {
  stroke: var(--accent-hex) !important;
}

.react-flow__edge.edge-base {
  --xy-edge-stroke: hsl(var(--border));
  --xy-edge-stroke-width: 2px;
}

.react-flow__edge.edge-selected {
  --xy-edge-stroke: hsl(var(--primary));
  --xy-edge-stroke-selected: hsl(var(--primary));
  --xy-edge-stroke-width: 3px;
  opacity: 1;
}

.react-flow__edge.edge-dependency {
  --xy-edge-stroke: var(--edge-dependency);
  --xy-edge-stroke-selected: var(--edge-dependency);
  opacity: 1;
}

.react-flow__edge.edge-dependent {
  --xy-edge-stroke: var(--edge-dependent);
  --xy-edge-stroke-selected: var(--edge-dependent);
  opacity: 1;
}

.react-flow__edge.edge-connected {
  --xy-edge-stroke: hsl(var(--primary));
  opacity: 1;
}

.react-flow__edge.edge-dimmed {
  opacity: 0.3;
}

.react-flow__edge:hover {
  --xy-edge-stroke-width: 2.5px;
}

.react-flow__node.group-container {
  pointer-events: none !important;
}

.react-flow__node.group-container .group-container__header {
  pointer-events: auto !important;
}

.react-flow {
  --xy-controls-button-background-color: hsl(var(--card));
  --xy-controls-button-background-color-hover: hsl(var(--secondary));
  --xy-controls-button-color: hsl(var(--foreground));
  --xy-controls-button-color-hover: hsl(var(--foreground));
  --xy-controls-button-border-color: hsl(var(--border));
  --xy-controls-box-shadow: 0 6px 16px hsl(var(--background) / 0.45);
}

.react-flow__controls {
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  background: hsl(var(--card));
  box-shadow: 0 6px 16px hsl(var(--background) / 0.45);
  overflow: hidden;
}

.react-flow__controls-button {
  height: 32px;
  width: 32px;
  border-bottom: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  color: hsl(var(--foreground));
  transition: background-color 150ms ease, color 150ms ease;
}

.react-flow__controls-button:hover {
  background: hsl(var(--secondary));
}

.react-flow__controls-button:last-child {
  border-bottom: 0;
}

.react-flow__controls-button svg {
  height: 16px;
  width: 16px;
}

.react-flow__controls-button[aria-pressed='true'] {
  background: hsl(var(--primary) / 0.2);
  color: hsl(var(--primary));
}
