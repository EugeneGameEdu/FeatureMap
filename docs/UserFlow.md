Первичное сканирование (новый проект)

Пользователь: Проанализируй мой проект с помощью featuremap

AI: Отлично! Настройка FeatureMap состоит из 4 этапов:

    📋 План:
    1. Анализ структуры → пойму что за проект
    2. Техническое сканирование → парсеры создадут кластеры кода
    3. Создание фич → сгруппирую кластеры в понятные архитектурные блоки
    4. Группировка фич (опционально) → объединю фичи в высокоуровневые категории

    Начинаю анализ структуры...
    [вызывает analyze_project_structure]

AI: ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    Этап 1 из 4: Анализ структуры ✓
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    
    Вижу 3 части проекта:
    
    ✅ backend/ — Go бэкенд (45 файлов)
       Могу парсить
       
    ✅ frontend/ — Next.js приложение (120 файлов)
       Могу парсить
       
    ⚠️ react-admin/ — Legacy React (80 файлов)
       Могу парсить, но выглядит как старый код
       
    ❌ scripts/ — Python скрипты (15 файлов)
       Не могу парсить (Python не поддерживается)
    
    Что сканируем?
    • Все поддерживаемые (backend, frontend, react-admin)
    • Только активные (backend, frontend)
    • Выбрать вручную

Пользователь: Только активные, react-admin не нужен

AI: Принял. Сканирую backend и frontend.
    [вызывает save_project_config]
    [вызывает run_scan]
    
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    Этап 2 из 4: Техническое сканирование ✓
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    
    Парсеры проанализировали код:
    • 165 файлов обработано
    • 23 кластера создано
    • 89 зависимостей найдено
    
    Кластеры — это технические группировки по папкам.
    Сейчас превращу их в понятные архитектурные фичи.
    
    Создать фичи?

Пользователь: Да

AI: [вызывает get_grouping_input]
    [анализирует кластеры]
    [вызывает save_features_from_grouping]
    
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    Этап 3 из 4: Создание фич ✓
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    
    Создал 6 архитектурных фич:
    
    🔷 API Gateway — обработка HTTP запросов (4 кластера)
    🔷 Data Storage — работа с базой данных (3 кластера)
    🔷 User Interface — React компоненты (5 кластеров)
    🔷 State Management — Redux логика (3 кластера)
    🔷 Authentication — авторизация (4 кластера)
    🔷 Shared Utilities — общие утилиты (4 кластера)
    
    Хотите объединить фичи в группы? 
    Это удобно для больших проектов — например группа "Backend" 
    объединит API Gateway, Data Storage, Authentication.
    
    • Да, создай группы
    • Нет, достаточно фич
    • Покажи карту как есть

Пользователь: Да, создай группы

AI: [вызывает create_groups_from_features или аналог]
    
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    Этап 4 из 4: Группировка фич ✓
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    
    Создал 3 группы:
    
    📁 Backend Services
       └─ API Gateway, Data Storage, Authentication
       
    📁 Frontend Application  
       └─ User Interface, State Management
       
    📁 Platform Foundation
       └─ Shared Utilities
    
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    🎉 Готово!
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    
    Ваш проект проанализирован:
    • 165 файлов → 23 кластера → 6 фич → 3 группы
    
    Что дальше:
    • "Покажи карту" — открою визуализацию
    • "Расскажи про Authentication" — детали по фиче
    • "Что зависит от Data Storage" — анализ зависимостей

Повторное сканирование (проект изменился)

Пользователь: Обнови featuremap, я добавил новый модуль

AI: Проверяю изменения...
    [вызывает check_project_changes или run_scan]
    
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    Обнаружены изменения
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    
    Новое:
    • +2 кластера (payments/, notifications/)
    • +12 файлов
    
    Изменилось:
    • Кластер api-routes — добавлены файлы
    
    Удалено:
    • Кластер old-helpers — файлы удалены
    
    Как обновить фичи?
    • Автоматически — добавлю новые кластеры к подходящим фичам
    • Перегруппировать — пересмотрю всю структуру фич
    • Вручную — покажу новые кластеры, решишь сам

Пользователь: Автоматически

AI: [вызывает update_features_incremental или аналог]
    
    Готово! Обновил карту:
    • payments/ → добавил в фичу "API Gateway"
    • notifications/ → создал новую фичу "Notifications"
    • old-helpers удалён из "Shared Utilities"
    
    Хотите посмотреть обновлённую карту?

Быстрые команды (после настройки)

Пользователь: Покажи карту

AI: [вызывает get_map_url или open_visualization]
    Открываю визуализацию: http://localhost:3000
    
---

Пользователь: Что делает модуль Authentication?

AI: [вызывает get_feature_details]
    
    🔷 Authentication
    
    Назначение: Управление авторизацией и сессиями пользователей
    
    Содержит 4 кластера:
    • auth-api — эндпоинты /login, /logout, /refresh
    • auth-middleware — проверка токенов
    • auth-store — Redux состояние авторизации  
    • auth-ui — компоненты LoginForm, LogoutButton
    
    Зависит от: Data Storage, Shared Utilities
    От него зависят: User Interface, API Gateway

---

Пользователь: Переименуй фичу "Shared Utilities" в "Core Platform"

AI: [вызывает update_feature]
    Готово, переименовал.